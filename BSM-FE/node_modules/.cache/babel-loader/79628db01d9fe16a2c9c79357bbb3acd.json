{"remainingRequest":"/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/node_modules/babel-loader/lib/index.js!/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/node_modules/eslint-loader/index.js??ref--14-0!/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/src/store/modules/auth/actions.js","dependencies":[{"path":"/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/src/store/modules/auth/actions.js","mtime":1652549691697},{"path":"/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/babel.config.js","mtime":1651953485891},{"path":"/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/node_modules/cache-loader/dist/cjs.js","mtime":1651953486699},{"path":"/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/node_modules/babel-loader/lib/index.js","mtime":1651953486585},{"path":"/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/node_modules/eslint-loader/index.js","mtime":1651953487915}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FxYW1pbmUvRG9jdW1lbnRzL1Byb2plY3RzL0J1c2luZXNzIHN5c3RlbXMgbWFuYWdlciAtIExhcmF2ZWwgLSBWdWVKcy9CU00tRkUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FxYW1pbmUvRG9jdW1lbnRzL1Byb2plY3RzL0J1c2luZXNzIHN5c3RlbXMgbWFuYWdlciAtIExhcmF2ZWwgLSBWdWVKcy9CU00tRkUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKdmFyIHRpbWVyOwpleHBvcnQgZGVmYXVsdCB7CiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LmRpc3BhdGNoKCdhdXRoJywgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwYXlsb2FkKSwge30sIHsKICAgICAgICAgICAgICAgIG1vZGU6ICdsb2dpbicKICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgc2lnbnVwOiBmdW5jdGlvbiBzaWdudXAoY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuZGlzcGF0Y2goJ2F1dGgnLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBheWxvYWQpLCB7fSwgewogICAgICAgICAgICAgICAgbW9kZTogJ3NpZ251cCcKICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICBhdXRoOiBmdW5jdGlvbiBhdXRoKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBtb2RlLCB1cmw7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgbW9kZSA9IHBheWxvYWQubW9kZTsKICAgICAgICAgICAgICB1cmwgPSBfdGhpcy4kYXBwX3VybCArICcvYXBpL3YxL2FkbWluL2xvZ2luJzsKCiAgICAgICAgICAgICAgaWYgKCEobW9kZSA9PT0gJ3NpZ251cCcpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIHJlZ2lzdGVyCiAgICAgICAgICAgICAgdXJsID0gX3RoaXMuJGFwcF91cmwgKyAnL2FwaS92MS9hZG1pbi9yZWdpc3Rlcic7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYXhpb3MucG9zdCh1cmwsIHsKICAgICAgICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLAogICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogcGF5bG9hZC5maXJzdF9uYW1lLAogICAgICAgICAgICAgICAgbGFzdF9uYW1lOiBwYXlsb2FkLmxhc3RfbmFtZSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkLAogICAgICAgICAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiBwYXlsb2FkLnBhc3N3b3JkX2NvbmZpcm1hdGlvbgogICAgICAgICAgICAgIH0pIC8vIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAvLyAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXNwb25zZURhdGEpOwogICAgICAgICAgICAgIC8vICAgICBjb250ZXh0LmNvbW1pdCgnc2V0U3VjY2VzcycsIHsKICAgICAgICAgICAgICAvLyAgICAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlRGF0YSwKICAgICAgICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9ycykgewogICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tbWl0KCdzZXRFcnJvcnMnLCBlcnJvcnMucmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmF4aW9zLnBvc3QodXJsLCB7CiAgICAgICAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhOyAvL1Rva2VuIGV4cGlyYXRpb24gKCsgY29udmVydCB0byBudW1iZXIpCiAgICAgICAgICAgICAgICAvL2NvbnN0IGV4cGlyZXNJbiA9ICtyZXNwb25zZURhdGEuZXhwaXJlc0luICogMTAwMDsKCiAgICAgICAgICAgICAgICAvL1Rva2VuIGV4cGlyYXRpb24gKCsgY29udmVydCB0byBudW1iZXIpCiAgICAgICAgICAgICAgICAvL2NvbnN0IGV4cGlyZXNJbiA9ICtyZXNwb25zZURhdGEuZXhwaXJlc0luICogMTAwMDsKICAgICAgICAgICAgICAgIHZhciBleHBpcmVzSW4gPSAzNjAwICogMTAwMDsKICAgICAgICAgICAgICAgIHZhciBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlc0luOyAvL1N0b3JlIERhdGEgaW4gTG9jYWxTdG9yYWdlCgogICAgICAgICAgICAgICAgLy9TdG9yZSBEYXRhIGluIExvY2FsU3RvcmFnZQogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZURhdGEudXNlcikpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzcG9uc2VEYXRhLmFjY2Vzc190b2tlbik7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzcG9uc2VEYXRhLnVzZXIuaWQpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicsIGV4cGlyYXRpb25EYXRlKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gcmVzcG9uc2VEYXRhLmFjY2Vzc190b2tlbjsgLy9BZnRlciB0aGlzIGR1cmF0aW9uICJleHBpcmVzSW4iIHRoaXMgZnVuY3Rpb24gd2lsbCBleGVjdXRlIAoKICAgICAgICAgICAgICAgIC8vQWZ0ZXIgdGhpcyBkdXJhdGlvbiAiZXhwaXJlc0luIiB0aGlzIGZ1bmN0aW9uIHdpbGwgZXhlY3V0ZSAKICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2F1dG9Mb2dvdXQnKTsKICAgICAgICAgICAgICAgIH0sIGV4cGlyZXNJbik7CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICAgICAgICAgICAgdXNlcjogcmVzcG9uc2VEYXRhLnVzZXIsCiAgICAgICAgICAgICAgICAgIHRva2VuOiByZXNwb25zZURhdGEuYWNjZXNzX3Rva2VuLAogICAgICAgICAgICAgICAgICB1c2VySWQ6IHJlc3BvbnNlRGF0YS51c2VyLmlkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbW1pdCgnc2V0RXJyb3JzJywgZXJyb3IpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgdHJ5TG9naW46IGZ1bmN0aW9uIHRyeUxvZ2luKGNvbnRleHQpIHsKICAgIHZhciB1c2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsKICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgdmFyIHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgIHZhciB0b2tlbkV4cGlyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJyk7CiAgICB2YXIgZXhwaXJlc0luID0gdG9rZW5FeHBpcmF0aW9uIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgaWYgKGV4cGlyZXNJbiA8IDApIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2F1dG9Mb2dvdXQnKTsKICAgIH0sIGV4cGlyZXNJbik7CgogICAgaWYgKHRva2VuICYmIHVzZXJJZCAmJiB1c2VyKSB7CiAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICAgIHVzZXI6IEpTT04ucGFyc2UodXNlciksCiAgICAgICAgdG9rZW46IHRva2VuLAogICAgICAgIHVzZXJJZDogdXNlcklkCiAgICAgIH0pOwogICAgICB3aW5kb3cuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9IHRva2VuOwogICAgfQogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoY29udGV4dCkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJJZCcpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicpOwogICAgd2luZG93LmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSBudWxsOyAvL2lmIHdlIG1hbnVhbHkgY2xpY2sgdGhlIGxvZ291dAoKICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgdXNlcjogbnVsbCwKICAgICAgdG9rZW46IG51bGwsCiAgICAgIHVzZXJJZDogbnVsbCwKICAgICAgZXJyb3JzOiAnJwogICAgfSk7CiAgfSwKICBhdXRvTG9nb3V0OiBmdW5jdGlvbiBhdXRvTG9nb3V0KGNvbnRleHQpIHsKICAgIC8vcmVkaXJlY3QgYWZ0ZXIgbG9naW5PdXQKICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOwogICAgY29udGV4dC5jb21taXQoJ3NldEF1dG9Mb2dvdXQnKTsKICB9Cn07"},{"version":3,"sources":["/Users/aqamine/Documents/Projects/Business systems manager - Laravel - VueJs/BSM-FE/src/store/modules/auth/actions.js"],"names":["timer","login","context","payload","dispatch","mode","signup","auth","url","$app_url","window","axios","post","email","first_name","last_name","password","password_confirmation","catch","errors","commit","response","data","then","responseData","expiresIn","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","user","access_token","id","defaults","headers","common","setTimeout","token","userId","error","tryLogin","getItem","tokenExpiration","parse","logout","removeItem","clearTimeout","autoLogout"],"mappings":"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","sourcesContent":["let timer;\nexport default {\n    async login(context, payload) {\n        return context.dispatch('auth', {\n            ...payload,\n            mode: 'login'\n        })\n    },\n    async signup(context, payload) {\n        return context.dispatch('auth', {\n            ...payload,\n            mode: 'signup'\n        })\n    },\n    async auth(context, payload) {\n        const mode = payload.mode;\n        let url = this.$app_url + '/api/v1/admin/login';\n\n        if (mode === 'signup') {\n            // register\n            url = this.$app_url + '/api/v1/admin/register';\n            await window.axios.post(url, {\n                    email: payload.email,\n                    first_name: payload.first_name,\n                    last_name: payload.last_name,\n                    password: payload.password,\n                    password_confirmation: payload.password_confirmation,\n                })\n                // .then(response => {\n                //     const responseData = response.data.message;\n                //     console.log(responseData);\n\n            //     context.commit('setSuccess', {\n            //         success: responseData,\n            //     });\n\n            // })\n            .catch(errors => context.commit('setErrors', errors.response.data.errors));\n        } else {\n            //login\n            await window.axios.post(url, {\n                    email: payload.email,\n                    password: payload.password\n                })\n                .then(response => {\n                    const responseData = response.data;\n                    //Token expiration (+ convert to number)\n                    //const expiresIn = +responseData.expiresIn * 1000;\n                    const expiresIn = 3600 * 1000;\n                    const expirationDate = new Date().getTime() + expiresIn;\n\n                    //Store Data in LocalStorage\n                    localStorage.setItem('user', JSON.stringify(responseData.user));\n                    localStorage.setItem('token', responseData.access_token);\n                    localStorage.setItem('userId', responseData.user.id);\n                    localStorage.setItem('tokenExpiration', expirationDate);\n                    window.axios.defaults.headers.common[\"Authorization\"] = responseData.access_token;\n\n                    //After this duration \"expiresIn\" this function will execute \n                    timer = setTimeout(function() {\n                        context.dispatch('autoLogout');\n                    }, expiresIn)\n\n                    context.commit('setUser', {\n                        user: responseData.user,\n                        token: responseData.access_token,\n                        userId: responseData.user.id,\n                    });\n                })\n                .catch(error => context.commit('setErrors', error));\n        }\n\n    },\n    tryLogin(context) {\n        const user = localStorage.getItem('user');\n        const token = localStorage.getItem('token');\n        const userId = localStorage.getItem('userId');\n        const tokenExpiration = localStorage.getItem('tokenExpiration');\n\n        const expiresIn = tokenExpiration - new Date().getTime();\n        if (expiresIn < 0) {\n            return;\n        }\n        timer = setTimeout(function() {\n            context.dispatch('autoLogout');\n        }, expiresIn);\n\n        if (token && userId && user) {\n            context.commit('setUser', {\n                user: JSON.parse(user),\n                token: token,\n                userId: userId,\n            });\n            window.axios.defaults.headers.common[\"Authorization\"] = token;\n        }\n    },\n    logout(context) {\n        localStorage.removeItem('user');\n        localStorage.removeItem('token');\n        localStorage.removeItem('userId');\n        localStorage.removeItem('tokenExpiration');\n        window.axios.defaults.headers.common[\"Authorization\"] = null;\n        //if we manualy click the logout\n        clearTimeout(timer);\n        context.commit('setUser', {\n            user: null,\n            token: null,\n            userId: null,\n            errors: '',\n        });\n\n    },\n    autoLogout(context) {\n        //redirect after loginOut\n        context.dispatch('logout');\n        context.commit('setAutoLogout');\n\n    }\n}"]}]}